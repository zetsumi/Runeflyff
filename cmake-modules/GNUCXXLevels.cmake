SET(GNU_CXX20_FLAG "-std=c++20")
SET(GNU_CXX2A_FLAG "-std=c++2a")
SET(GNU_CXX17_FLAG "-std=c++17")
SET(GNU_CXX14_FLAG "-std=c++14")
SET(GNU_CXX11_FLAG "-std=c++11")
SET(GNU_CXX0X_FLAG "-std=c++0x")

CHECK_CXX_COMPILER_FLAG(${GNU_CXX20_FLAG} GNU_SUPPORTS_CXX20)
CHECK_CXX_COMPILER_FLAG(${GNU_CXX2A_FLAG} GNU_SUPPORTS_CXX2A)
CHECK_CXX_COMPILER_FLAG(${GNU_CXX17_FLAG} GNU_SUPPORTS_CXX17)
CHECK_CXX_COMPILER_FLAG(${GNU_CXX14_FLAG} GNU_SUPPORTS_CXX14)
CHECK_CXX_COMPILER_FLAG(${GNU_CXX11_FLAG} GNU_SUPPORTS_CXX11)
CHECK_CXX_COMPILER_FLAG(${GNU_CXX0X_FLAG} GNU_SUPPORTS_CXX0X)

IF (GNU_SUPPORTS_CXX20)
    MESSAGE(DEBUG "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++20 (${GNU_CXX20_FLAG})")
ELSEIF (GNU_SUPPORTS_CXX2A)
    MESSAGE(DEBUG "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++20 *experimental* (${GNU_CXX2A_FLAG})")
ELSEIF (GNU_SUPPORTS_CXX17)
    MESSAGE(DEBUG "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++17 (${GNU_CXX17_FLAG})")
ELSEIF (GNU_SUPPORTS_CXX14)
    MESSAGE(DEBUG "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++14 (${GNU_CXX14_FLAG})")
ELSEIF (GNU_SUPPORTS_CXX11)
    MESSAGE(DEBUG "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++11 (${GNU_CXX11_FLAG})")
ELSEIF (GNU_SUPPORTS_CXX0X)
    MESSAGE(WARN "${CMAKE_CXX_COMPILER} ${CMAKE_CXX_COMPILER_VERSION} supports C++11 *experimental* (${GNU_CXX0X_FLAG})")
ENDIF()

SET(COMPILER_SUPPORTS_CXX20 GNU_SUPPORTS_CXX20 OR GNU_SUPPORTS_CXX2A)
SET(COMPILER_SUPPORTS_CXX17 COMPILER_SUPPORTS_CXX20 OR GNU_SUPPORTS_CXX17)
SET(COMPILER_SUPPORTS_CXX14 COMPILER_SUPPORTS_CXX17 OR GNU_SUPPORTS_CXX14)
SET(COMPILER_SUPPORTS_CXX11 COMPILER_SUPPORTS_CXX14 OR GNU_SUPPORTS_CXX11 OR GNU_SUPPORTS_CXX0X)

IF (GNU_SUPPORTS_CXX20)
    SET(COMPILER_CXX20_FLAG ${GNU_CXX20_FLAG})
ELSEIF(GNU_SUPPORTS_CXX2A)
    SET(COMPILER_CXX20_FLAG ${GNU_CXX2A_FLAG})
ENDIF()

SET(COMPILER_CXX17_FLAG ${GNU_CXX17_FLAG})
SET(COMPILER_CXX14_FLAG ${GNU_CXX14_FLAG})

IF (GNU_SUPPORTS_CXX11)
    SET(COMPILER_CXX11_FLAG ${GNU_CXX11_FLAG})
ELSEIF(GNU_SUPPORTS_CXX0X)
    SET(COMPILER_CXX11_FLAG ${GNU_CXX0X_FLAG})
ENDIF()